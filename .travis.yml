language: node_js
cache:
  directories:
  - node_modules
node_js:
- lts/*
install:
- npm install
- npm install codecov -g
script:
- npm run test
after_success:
- codecov -f coverage/*.json
deploy:
  provider: npm
  email: 1461304646@qq.com
  api_key:
    secure: CKTlXCK0ers5GpLR7f2kWQaJ4earj7Q+VxvvMMwIPPbz9ccJ4AQqE7NYwvRQzbhhHFIufJrtGJfhwgmx/2rttSl9KDnYASMZDhBMbXgJJY1Ili6OVYPmqMJITuulbmyRpcpVsGD7NUzHozqgjfmdRYHIlszU3VBr5gSj05qR8a4nyADAo4ZpgMKGAS2gbmQvue/W91iiFb097jMpCF7IRS0dfv5tjYBB5JDt9Fdh/nWNIeOw1QL2Zv2jEfAllpSaeEeFaw/D3n+P2q0cNxCk3TPmlql6H/2iOjDTlN5LGB5Y439jI3WUJCP+OahiNdaOCQY1T1wzT/xK1DfmZyBtD4r8N1qdnDQSK36sgrEDy/hJyJxzRtU87cOgpPA11zGe7svMEbaTxnyd6cfNwE1eKG5BTbyuHM2G0FLRCpafUF1T32iLJWbmFqmVszvforIWYRNHlO6ypyqesjjnApF1BSL8LFem+8W/BRX3pT77oWgPvgM8sbUrwjCkz9q3D5paqFNharKJBc+RgECBDl/4/xxom7jHNeLnxBOHZ2qkZeaCc9gseG9A5pTlpOXwh2csJNz2RSu9NQcmS9p70ugE9aRMdJnxLQUu4krTh4GUtfS0njqMC0cWQunirCAaVQBpSXHMkKpWWyfcmkWkpMhd6KJiviiQSmgqfm8vgCDwQWQ=
  on:
    tags: true
    branch: master
    repo: unity-template/utils
  tag: latest
  skip_cleanup: 'true'
  condition: "$TRAVIS_TAG =~ ^v[0-9]+.[0-9]+.[0-9]+$"
